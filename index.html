<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>交通設備定位編碼系統</title>
    <style>
        :root { --primary-color: #007bff; --success-color: #28a745; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; max-width: 800px; margin: 1rem auto; padding: 0 1rem; background-color: #f4f6f9; color: #333; }
        .container { background: #ffffff; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); padding: 1.5rem; margin-bottom: 1.5rem; }
        h1, h2 { text-align: center; color: #1c1e21; }
        h2 { border-bottom: 2px solid var(--primary-color); padding-bottom: 0.5rem; margin-top: 0; }
        .form-group { margin-bottom: 1rem; }
        label { display: block; font-weight: bold; margin-bottom: 0.5rem; }
        input[type="text"], textarea { width: 100%; padding: 0.8rem; border: 1px solid #ccc; border-radius: 6px; font-size: 1rem; box-sizing: border-box; }
        textarea { resize: vertical; min-height: 80px; }
        .readonly-input { background-color: #e9ecef; cursor: not-allowed; }
        button { display: block; width: 100%; padding: 0.8rem; font-size: 1.1rem; color: white; border: none; border-radius: 6px; cursor: pointer; transition: background-color 0.3s; margin-bottom: 10px; }
        #startScanBtn { background-color: var(--success-color); font-weight: bold; padding: 1rem; font-size: 1.3rem; }
        #downloadCsvBtn { background-color: var(--primary-color); }
        .status-text { margin-top: 0.5rem; color: #606770; font-size: 0.9rem; text-align: center; }
        .file-input-wrapper { border: 2px dashed #ccc; padding: 1rem; text-align: center; border-radius: 8px; cursor: pointer; background-color: #fafafa; transition: all 0.2s ease-in-out; }
        .file-input-wrapper:hover { border-color: var(--primary-color); background-color: #f0f8ff; }
        #csvUploader { display: none; }
        #recordsPreview { width: 100%; height: 100px; font-size: 0.8em; background-color: #e9ecef; border: 1px solid #ccc; border-radius: 6px; }
    </style>
</head>
<body>

    <h1>交通設備定位編碼系統</h1>

    <div class="container">
        <h2>步驟一：載入今日舊有紀錄 (選填)</h2>
        <div class="file-input-wrapper" id="uploadArea">
            <label for="csvUploader">點擊此處，或將今日的 CSV 檔拖曳至此<br>以附加新紀錄</label>
            <input type="file" id="csvUploader" accept=".csv">
        </div>
        <p class="status-text" id="uploadStatus">如為今日首次盤點，請略過此步驟。</p>
        <label for="recordsPreview">已載入紀錄預覽:</label>
        <textarea id="recordsPreview" readonly></textarea>
    </div>

    <div class="container">
        <h2>步驟二：自動讀取新紀錄</h2>
        <button id="startScanBtn">一鍵讀取 (NFC + GPS)</button>
        <p class="status-text" id="scanStatus">請點擊按鈕開始盤點作業</p>
        <div class="form-group"><label for="timestamp">(2) 讀取日期時間</label><input type="text" id="timestamp" class="readonly-input" readonly></div>
        <div class="form-group"><label for="nfcSerial">(1) NFC 卡片序號</label><input type="text" id="nfcSerial" class="readonly-input" readonly></div>
        <div class="form-group"><label for="gpsLocation">(3) GPS 位置</label><input type="text" id="gpsLocation" class="readonly-input" readonly></div>
    </div>

    <div class="container">
        <h2>步驟三：手動填寫資訊</h2>
        <div class="form-group"><label for="unitName">(4) 單位</label><input type="text" id="unitName" placeholder="例如：臺北市政府交通局"></div>
        <div class="form-group"><label for="equipmentName">(5) 設備名稱</label><input type="text" id="equipmentName" placeholder="例如：交通號誌控制器"></div>
        <div class="form-group"><label for="roadLocation">(6) 位置(道路)說明</label><input type="text" id="roadLocation" placeholder="例如：中山路與中正路交叉口"></div>
        <div class="form-group"><label for="description">(7) 功能簡介</label><textarea id="description" placeholder="例如：控制路口車流與行人號誌"></textarea></div>
        <div class="form-group"><label for="remarks">(8) 備註</label><textarea id="remarks" placeholder="例如：外殼有輕微刮傷"></textarea></div>
    </div>

    <div class="container">
        <h2>步驟四：儲存盤點紀錄</h2>
        <p>將會把新紀錄附加到舊有紀錄之後，並產生新的 CSV 檔。</p>
        <button id="downloadCsvBtn">新增紀錄並下載 .CSV 檔</button>
        <p id="downloadStatus" class="status-text"></p>
    </div>
    
    <script src="app.js"></script>

</body>
</html>